{% extends 'layouts/base.html' %}
{% load static %}
{% block contacts %}



<div class="card mb-2">
  <div class="card-header">
    <nav class="navbar bg-body-tertiary ">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'find_all' %}">
          <button type="button" class="btn btn-outline-primary">
            <i class="bi bi-eye pe-1"></i>Ver Todo
          </button>
        </a>
        <a class="navbar-brand " href="{% url 'create_one' %}">
          <button type="button" class="btn btn-outline-primary">
            <i class="bi bi-person-plus mx-2"></i>Añadir Contacto
          </button>
        </a>
        <form action="{% url 'find_all' %}" class="d-flex search" method="get">
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-search"></i></span>
            <input type="text" name="search" class="form-control search-bar"
              placeholder="{% if search_query %}{{ search_query }}{% else %}Buscar contacto{% endif %}" maxlength="30">
            <input type="submit" value="Buscar" class="btn btn-outline-primary btn-search">
          </div>
        </form>
      </div>
    </nav>
  </div>
  <div class="card-body">
    <table class="table border border-secondary-subtle">
      <thead>
        <tr>
          <th scope="col">Nombre</th>
          <th scope="col">Teléfono</th>
          <th scope="col" class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        {% for contact in contacts %}
        <tr>
          <td class="col-4">{{ contact.name }}</td>
          <td class="col">{{ contact.phone }}</td>
          <td class="col-3 text-center">
            <div class="btn-group" role="group">
              <a href="{% url 'find_by_id' contact_id=contact.id %}" class="btn btn-outline-primary mx-1">
                <i class="bi bi-person-circle"></i>
              </a>
              <a href="{% url 'update_by_id' contact_id=contact.id %}" class="btn btn-outline-warning mx-1">
                <i class="bi bi-pencil-square"></i>
              </a>
              <a href="{% url 'confirm_delete' contact_id=contact.id %}" class="btn btn-outline-danger mx-1">
                <i class="bi bi-trash3-fill"></i>
              </a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="text-center">No se encontraron contactos.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
</div>



<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    {% if contacts.has_previous %}
    <li class="page-item">
      <a class="page-link btn-info" href="?search={{ search_query }}&page={{ contacts.previous_page_number }}"
        aria-label="Previous">Anterior</a>
    </li>
    {% endif %}

    {% for page_num in contacts.paginator.page_range %}
    {% if page_num == contacts.number %}
    <li class="page-item active" aria-current="page">
      <span class="page-link btn-info">{{ page_num }}</span>
    </li>
    {% else %}
    <li class="page-item">
      <a class="page-link btn-info" href="?search={{ search_query }}&page={{ page_num }}">{{ page_num }}</a>
    </li>
    {% endif %}
    {% endfor %}

    {% if contacts.has_next %}
    <li class="page-item">
      <a class="page-link btn-info" href="?search={{ search_query }}&page={{ contacts.next_page_number }}"
        aria-label="Next">Siguiente</a>
    </li>
    {% endif %}
  </ul>
</nav>
{% endblock contacts %}